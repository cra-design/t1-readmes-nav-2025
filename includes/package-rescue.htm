<section id="rescue-en">
  <!-- 1) Year dataset seed -->
  <script type="application/json" id="pkg-seed">
    { "year": "2024" }
  </script>
  <div id="pkg-json" class="wb-inv"
       data-wb-jsonmanager='{
         "url": "#pkg-seed",
         "name": "pkg",
         "wait": true,
         "debug": false
       }'></div>

  <!-- 2) Map pkgyr -> year (text only) -->
  <div data-wb-urlmapping='{
    "pkgyr": {
      "action": "patch",
      "source": "#pkg-json",
      "match": "^(?:2016|2017|2018|2019|2020|2021|2022|2023|2024)$",
      "default": "2024",
      "patches": [
        { "op": "replace", "path": "/year", "value": "{qval}" }
      ]
    }
  }'></div>

  <!-- 3) Sentence (hidden by default).
         We include only the province-specific link for MB and show it when prov=mb -->
  <p id="dnmc-rsc" class="wb-inv">
    To find other <span data-json-replace="#[pkg]/year"></span> forms or guides you may need for Manitoba,
    return to the
    <a id="pkg-link-mb" class="wb-inv"
       data-wb-json='{"url":"#[pkg_mb]/href","type":"attr","attr":"href"}'>
      <span data-json-replace="#[pkg]/year"></span> Income tax package for Manitoba
    </a>.
  </p>

  <!-- 4) Province (MB) dataset seed + build href from pkgyr -->
  <script type="application/json" id="pkg-mb-seed">
    { "href": "general-income-tax-benefit-package/manitoba.html" }
  </script>
  <div id="pkg-mb-json" class="wb-inv"
       data-wb-jsonmanager='{"url":"#pkg-mb-seed","name":"pkg_mb","wait": true}'></div>
  <div data-wb-urlmapping='{
    "pkgyr": {
      "action": "patch",
      "source": "#pkg-mb-json",
      "match": "^(?:2016|2017|2018|2019|2020|2021|2022|2023|2024)$",
      "default": "2024",
      "patches": [
        { "op": "replace", "path": "/href", "value": "archived-general-income-tax-benefit-package-{qval}/manitoba.html" }
      ]
    }
  }'></div>

  <!-- 5) Reveal sentence and MB link when prov=mb
         (since prov and pkgyr always appear together, this single mapping is enough) -->
  <div data-wb-urlmapping='{
    "multiplequery": true,
    "prov": [
      {
        "match": "^mb$",
        "action": "removeClass",
        "source": "#dnmc-rsc",
        "class": "wb-inv"
      },
      {
        "match": "^mb$",
        "action": "removeClass",
        "source": "#pkg-link-mb",
        "class": "wb-inv"
      }
    ]
  }'></div>
</section>

